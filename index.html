<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Masculine Security ‚Äî Mini Office</title>
  <style>
    :root{
      --bg:#0b1220; --panel:#0f1a2f; --panel2:#0c1629; --card:#10203a;
      --muted:#93a4c6; --text:#e7eeff; --line:#1a2a4b;
      --accent:#3aa6ff; --accent2:#2bd4bd; --danger:#ff4d6d; --warn:#ffc857;
      --shadow:0 14px 40px rgba(0,0,0,.45);
      --radius:16px;
      --radius2:12px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:var(--font); background:
        radial-gradient(1200px 700px at 30% -10%, rgba(58,166,255,.22), transparent 55%),
        radial-gradient(1000px 600px at 90% 10%, rgba(43,212,189,.18), transparent 55%),
        linear-gradient(180deg, #07101f 0%, #070d18 100%);
      color:var(--text);
    }
    a{color:inherit}
    .app{
      min-height:100vh;
      display:grid;
      grid-template-columns: 280px 1fr;
      gap:18px;
      padding:18px;
      max-width: 1320px;
      margin:0 auto;
    }
    .sidebar{
      background: linear-gradient(180deg, rgba(16,32,58,.78), rgba(12,22,41,.78));
      border:1px solid rgba(255,255,255,.06);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:14px;
      position:sticky; top:14px; height: calc(100vh - 28px);
      display:flex; flex-direction:column;
    }
    .brand{
      display:flex; gap:12px; align-items:center;
      padding:10px;
      border-radius: var(--radius2);
      background: rgba(255,255,255,.03);
      border:1px solid rgba(255,255,255,.05);
    }
    .logo{
      width:42px; height:42px; border-radius: 14px;
      background: linear-gradient(135deg, rgba(58,166,255,.9), rgba(43,212,189,.9));
      display:grid; place-items:center;
      color:#06101f; font-weight:900;
      letter-spacing:.5px;
      box-shadow: 0 10px 30px rgba(58,166,255,.18);
    }
    .brand h1{margin:0; font-size:14px; line-height:1.2}
    .brand small{display:block; color:var(--muted); font-size:12px; margin-top:2px}
    .nav{
      margin-top:12px;
      display:flex; flex-direction:column; gap:8px;
    }
    .nav button{
      all:unset;
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
      padding:10px 12px;
      border-radius: 14px;
      cursor:pointer;
      border:1px solid rgba(255,255,255,.06);
      background: rgba(255,255,255,.02);
      transition: .15s ease;
    }
    .nav button:hover{
      transform: translateY(-1px);
      border-color: rgba(58,166,255,.35);
      background: rgba(58,166,255,.08);
    }
    .nav button.active{
      border-color: rgba(58,166,255,.55);
      background: rgba(58,166,255,.14);
      box-shadow: 0 10px 26px rgba(0,0,0,.25);
    }
    .nav .left{
      display:flex; align-items:center; gap:10px;
      font-weight:700; font-size:13px;
    }
    .pill{
      font-size:12px; color:var(--muted);
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(0,0,0,.16);
    }
    .foot{
      margin-top:auto;
      padding:10px;
      border-top:1px solid rgba(255,255,255,.06);
      color:var(--muted);
      font-size:12px;
    }
    .main{
      background: linear-gradient(180deg, rgba(16,32,58,.55), rgba(12,22,41,.55));
      border:1px solid rgba(255,255,255,.06);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:flex; flex-direction:column;
      min-height: calc(100vh - 36px);
    }
    .topbar{
      padding:14px;
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
      border-bottom:1px solid rgba(255,255,255,.06);
      background: rgba(0,0,0,.12);
    }
    .crumb{
      display:flex; flex-direction:column; gap:2px;
    }
    .crumb h2{margin:0; font-size:14px}
    .crumb small{color:var(--muted)}
    .actions{
      display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end;
    }
    .btn{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color:var(--text);
      padding:9px 12px;
      border-radius: 12px;
      cursor:pointer;
      transition:.15s ease;
      font-weight:700;
      font-size:13px;
    }
    .btn:hover{
      transform: translateY(-1px);
      border-color: rgba(58,166,255,.4);
      background: rgba(58,166,255,.10);
    }
    .btn.primary{
      border-color: rgba(58,166,255,.55);
      background: rgba(58,166,255,.16);
    }
    .btn.good{
      border-color: rgba(43,212,189,.55);
      background: rgba(43,212,189,.14);
    }
    .btn.danger{
      border-color: rgba(255,77,109,.45);
      background: rgba(255,77,109,.10);
    }
    .content{
      padding:14px;
      display:grid;
      gap:14px;
    }
    .grid2{display:grid; grid-template-columns: 1.2fr .8fr; gap:14px;}
    .grid3{display:grid; grid-template-columns: repeat(3, 1fr); gap:14px;}
    .card{
      background: rgba(16,32,58,.55);
      border:1px solid rgba(255,255,255,.06);
      border-radius: var(--radius2);
      padding:14px;
    }
    .card h3{margin:0 0 10px 0; font-size:14px}
    .muted{color:var(--muted)}
    .kpi{
      display:flex; align-items:flex-end; justify-content:space-between;
      gap:10px;
    }
    .kpi .value{font-size:22px; font-weight:900}
    .kpi .label{color:var(--muted); font-size:12px; font-weight:700}
    .table{
      width:100%;
      border-collapse:collapse;
      overflow:hidden;
      border-radius: 12px;
    }
    .table th, .table td{
      padding:10px 10px;
      border-bottom:1px solid rgba(255,255,255,.06);
      text-align:left;
      font-size:13px;
    }
    .table th{color:var(--muted); font-weight:800; font-size:12px}
    .row-actions{display:flex; gap:8px; justify-content:flex-end}
    .mini{
      padding:6px 10px; border-radius:10px; font-size:12px; font-weight:800;
    }
    .mini:hover{transform:none}
    .field{
      display:flex; flex-direction:column; gap:6px; margin-bottom:10px;
    }
    .field label{font-size:12px; color:var(--muted); font-weight:800}
    .field input, .field select, .field textarea{
      width:100%;
      padding:10px 12px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      color:var(--text);
      outline:none;
    }
    .field textarea{min-height:96px; resize:vertical}
    .split{display:grid; grid-template-columns: 1fr 1fr; gap:10px}
    .notice{
      border:1px dashed rgba(58,166,255,.45);
      background: rgba(58,166,255,.08);
      padding:12px;
      border-radius: 12px;
      color: var(--text);
      font-size:13px;
    }
    .tag{
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 10px; border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      font-size:12px; font-weight:800; color:var(--muted);
    }
    .right{ text-align:right }
    .hide{display:none !important}
    .hr{height:1px; background: rgba(255,255,255,.06); margin:10px 0}
    @media (max-width: 980px){
      .app{grid-template-columns: 1fr}
      .sidebar{position:relative; height:auto}
      .grid2,.grid3{grid-template-columns: 1fr}
    }
  </style>
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">MS</div>
        <div>
          <h1>Masculine Security</h1>
          <small>Mini Office ‚Ä¢ Offline (local)</small>
        </div>
      </div>

      <div class="nav" id="nav">
        <button data-page="overview" class="active">
          <div class="left">üè† √úbersicht <span class="pill">KPIs</span></div>
          <span class="pill" id="countOverview">‚Äì</span>
        </button>
        <button data-page="customers">
          <div class="left">üë§ Kunden</div>
          <span class="pill" id="countCustomers">0</span>
        </button>
        <button data-page="invoices">
          <div class="left">üßæ Rechnungen</div>
          <span class="pill" id="countInvoices">0</span>
        </button>
        <button data-page="expenses">
          <div class="left">üí≥ Ausgaben</div>
          <span class="pill" id="countExpenses">0</span>
        </button>
        <button data-page="payroll">
          <div class="left">üíº Lohnabrechnung</div>
          <span class="pill" id="countPayroll">0</span>
        </button>
        <button data-page="tax">
          <div class="left">üßæ Einkommensteuer</div>
          <span class="pill" id="taxYear">2026</span>
        </button>
        <button data-page="emailpdf">
          <div class="left">‚úâÔ∏è Email + PDF</div>
          <span class="pill">Export</span>
        </button>
        <button data-page="settings">
          <div class="left">‚öôÔ∏è Einstellungen</div>
          <span class="pill">Backup</span>
        </button>
      </div>

      <div class="foot">
        <div><b>Tipp:</b> GitHub commit ‚Üí Netlify auto deploy.</div>
        <div class="muted">Update: Ctrl+Shift+R haddii aan isbeddel muuqan.</div>
        <div class="muted" id="versionLabel"></div>
      </div>
    </aside>

    <main class="main">
      <div class="topbar">
        <div class="crumb">
          <h2 id="pageTitle">√úbersicht</h2>
          <small id="pageSub" class="muted">Umsatz ‚Ä¢ Ausgaben ‚Ä¢ Kunden ‚Ä¢ Rechnungen (offline)</small>
        </div>
        <div class="actions" id="topActions">
          <button class="btn primary" id="quickInvoice">+ Rechnung</button>
          <button class="btn" id="quickCustomer">+ Kunde</button>
          <button class="btn" id="quickExpense">+ Ausgabe</button>
          <button class="btn good" id="btnExport">Export JSON</button>
          <button class="btn" id="btnImport">Import JSON</button>
        </div>
      </div>

      <div class="content">
        <!-- OVERVIEW -->
        <section id="page-overview">
          <div class="grid3">
            <div class="card">
              <div class="kpi">
                <div>
                  <div class="label">Umsatz (dieser Monat)</div>
                  <div class="value" id="kpiMonthRevenue">0,00 ‚Ç¨</div>
                  <div class="muted" style="font-size:12px">MwSt: <span id="kpiMonthVat">0,00 ‚Ç¨</span> ‚Ä¢ Brutto: <span id="kpiMonthGross">0,00 ‚Ç¨</span></div>
                </div>
                <span class="tag">üìà</span>
              </div>
            </div>
            <div class="card">
              <div class="kpi">
                <div>
                  <div class="label">Ausgaben (dieser Monat)</div>
                  <div class="value" id="kpiMonthExpenses">0,00 ‚Ç¨</div>
                  <div class="muted" style="font-size:12px">Betrag total gespeichert</div>
                </div>
                <span class="tag">üí≥</span>
              </div>
            </div>
            <div class="card">
              <div class="kpi">
                <div>
                  <div class="label">Umsatz (dieses Jahr)</div>
                  <div class="value" id="kpiYearRevenue">0,00 ‚Ç¨</div>
                  <div class="muted" style="font-size:12px">Rechnungen: <span id="kpiInvoiceCount">0</span></div>
                </div>
                <span class="tag">üßæ</span>
              </div>
            </div>
          </div>

          <div class="grid2">
            <div class="card">
              <h3>Letzte Aktivit√§ten</h3>
              <table class="table">
                <thead>
                  <tr>
                    <th>Typ</th>
                    <th>Beschreibung</th>
                    <th>Datum</th>
                    <th class="right">Betrag</th>
                  </tr>
                </thead>
                <tbody id="recentList"></tbody>
              </table>
              <div class="muted" style="margin-top:10px">Hinweis: Alles l√§uft offline via localStorage (Browser).</div>
            </div>

            <div class="card">
              <h3>Schnellstart</h3>
              <div class="notice">
                Wie Lexoffice-Style: links Navigation, oben Aktionen, Daten offline.<br/>
                <b>Tipp:</b> Export/Import oben rechts f√ºr Backup.
              </div>
              <div class="hr"></div>
              <div class="split">
                <button class="btn primary" onclick="UI.go('invoices')">+ Rechnung</button>
                <button class="btn" onclick="UI.go('customers')">+ Kunde</button>
              </div>
              <div class="split" style="margin-top:10px">
                <button class="btn" onclick="UI.go('expenses')">+ Ausgabe</button>
                <button class="btn good" onclick="UI.go('emailpdf')">Email + PDF</button>
              </div>
            </div>
          </div>
        </section>

        <!-- CUSTOMERS -->
        <section id="page-customers" class="hide">
          <div class="grid2">
            <div class="card">
              <h3>Kunde hinzuf√ºgen</h3>
              <div class="field"><label>Firmenname / Name</label><input id="c_name" placeholder="z.B. Beispiel Kunde GmbH"></div>
              <div class="field"><label>Email</label><input id="c_email" placeholder="kunde@email.de"></div>
              <div class="field"><label>Adresse</label><input id="c_addr" placeholder="Stra√üe, PLZ Ort"></div>
              <button class="btn primary" onclick="Customers.add()">Speichern</button>
              <button class="btn danger" onclick="Customers.clearForm()">Leeren</button>
              <div class="muted" style="margin-top:10px">Tipp: Kundendaten werden in Rechnungen ausw√§hlbar.</div>
            </div>
            <div class="card">
              <h3>Kundenliste</h3>
              <table class="table">
                <thead><tr><th>Name</th><th>Email</th><th>Adresse</th><th class="right">Aktion</th></tr></thead>
                <tbody id="customersList"></tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- INVOICES -->
        <section id="page-invoices" class="hide">
          <div class="grid2">
            <div class="card">
              <h3>Rechnung erstellen</h3>
              <div class="split">
                <div class="field"><label>Rechnungs-Nr.</label><input id="i_no" placeholder="RE-2026-0001"></div>
                <div class="field"><label>Datum</label><input id="i_date" type="date"></div>
              </div>
              <div class="field">
                <label>Kunde</label>
                <select id="i_customer"></select>
              </div>
              <div class="split">
                <div class="field"><label>Leistung / Beschreibung</label><input id="i_desc" placeholder="z.B. Objektschutz 12h"></div>
                <div class="field"><label>Netto (‚Ç¨)</label><input id="i_net" type="number" step="0.01" placeholder="0.00"></div>
              </div>
              <div class="split">
                <div class="field"><label>USt % (0 f√ºr Kleinunternehmer)</label><input id="i_vatRate" type="number" step="0.01" value="0"></div>
                <div class="field"><label>Status</label>
                  <select id="i_status">
                    <option value="Entwurf">Entwurf</option>
                    <option value="Gesendet">Gesendet</option>
                    <option value="Bezahlt">Bezahlt</option>
                  </select>
                </div>
              </div>
              <button class="btn primary" onclick="Invoices.add()">Speichern</button>
              <button class="btn" onclick="Invoices.print()">PDF √∂ffnen</button>
              <button class="btn danger" onclick="Invoices.clearForm()">Leeren</button>
              <div class="muted" style="margin-top:10px">PDF = Browser Print (Save as PDF).</div>
            </div>

            <div class="card">
              <h3>Rechnungen</h3>
              <table class="table">
                <thead><tr><th>Nr.</th><th>Kunde</th><th>Datum</th><th>Status</th><th class="right">Netto</th><th class="right">Aktion</th></tr></thead>
                <tbody id="invoicesList"></tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- EXPENSES -->
        <section id="page-expenses" class="hide">
          <div class="grid2">
            <div class="card">
              <h3>Ausgabe hinzuf√ºgen</h3>
              <div class="split">
                <div class="field"><label>Datum</label><input id="e_date" type="date"></div>
                <div class="field"><label>Betrag (‚Ç¨)</label><input id="e_amount" type="number" step="0.01" placeholder="0.00"></div>
              </div>
              <div class="field"><label>Kategorie</label>
                <select id="e_cat">
                  <option>B√ºromaterial</option>
                  <option>Fahrtkosten</option>
                  <option>Versicherung</option>
                  <option>Telefon/Internet</option>
                  <option>Sonstiges</option>
                </select>
              </div>
              <div class="field"><label>Notiz</label><input id="e_note" placeholder="z.B. Quittung #123"></div>
              <button class="btn primary" onclick="Expenses.add()">Speichern</button>
              <button class="btn danger" onclick="Expenses.clearForm()">Leeren</button>
            </div>

            <div class="card">
              <h3>Ausgabenliste</h3>
              <table class="table">
                <thead><tr><th>Datum</th><th>Kategorie</th><th>Notiz</th><th class="right">Betrag</th><th class="right">Aktion</th></tr></thead>
                <tbody id="expensesList"></tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- PAYROLL -->
        <section id="page-payroll" class="hide">
          <div class="grid2">
            <div class="card">
              <h3>Lohnabrechnung (einfach)</h3>
              <div class="split">
                <div class="field"><label>Mitarbeiter Name</label><input id="p_name" placeholder="Name"></div>
                <div class="field"><label>Monat (YYYY-MM)</label><input id="p_month" placeholder="2026-02"></div>
              </div>
              <div class="split">
                <div class="field"><label>Stunden</label><input id="p_hours" type="number" step="0.01" placeholder="0"></div>
                <div class="field"><label>Stundenlohn (‚Ç¨)</label><input id="p_rate" type="number" step="0.01" placeholder="16.00"></div>
              </div>
              <div class="split">
                <div class="field"><label>Abz√ºge (‚Ç¨)</label><input id="p_deduct" type="number" step="0.01" value="0"></div>
                <div class="field"><label>Notiz</label><input id="p_note" placeholder="z.B. SV/Steuer Sch√§tzung"></div>
              </div>
              <button class="btn primary" onclick="Payroll.add()">Speichern</button>
              <button class="btn" onclick="Payroll.print()">PDF √∂ffnen</button>
              <button class="btn danger" onclick="Payroll.clearForm()">Leeren</button>
              <div class="muted" style="margin-top:10px">Hinweis: Dies ist eine einfache interne Lohnliste (nicht offiziell).</div>
            </div>

            <div class="card">
              <h3>Lohnliste</h3>
              <table class="table">
                <thead><tr><th>Monat</th><th>Name</th><th>Stunden</th><th class="right">Brutto</th><th class="right">Netto</th><th class="right">Aktion</th></tr></thead>
                <tbody id="payrollList"></tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- TAX -->
        <section id="page-tax" class="hide">
          <div class="grid2">
            <div class="card">
              <h3>Einkommensteuer (√úbersicht)</h3>
              <div class="field">
                <label>Steuerjahr</label>
                <select id="t_year" onchange="Tax.refresh()">
                  <option>2026</option>
                  <option>2025</option
