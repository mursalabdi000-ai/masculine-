========================
FILE: index.html
========================
<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Masculine Security – Mini Office</title>

  <!-- ✅ IMPORTANT: Manifest must be relative -->
  <link rel="manifest" href="./manifest.json" />

  <!-- ✅ Theme colors -->
  <meta name="theme-color" content="#0a1e2d" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <!-- ✅ Icons (make sure these files exist in repo root) -->
  <link rel="icon" href="./icon-192.png" />
  <link rel="apple-touch-icon" href="./icon-192.png" />

  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <main class="wrap">
    <h1>Masculine Security – Mini Office</h1>
    <p>PWA Test – Installation should appear.</p>

    <div class="card">
      <p><strong>Status:</strong> <span id="status">Loading…</span></p>
      <button id="btnHardReload" type="button">Hard reload (bypass cache)</button>
    </div>
  </main>

  <script>
    const statusEl = document.getElementById("status");
    const btn = document.getElementById("btnHardReload");

    function setStatus(msg) { statusEl.textContent = msg; }

    // ✅ Register Service Worker (relative path)
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", async () => {
        try {
          const reg = await navigator.serviceWorker.register("./service-worker.js", { scope: "./" });
          setStatus("Service Worker registered ✅");
          // Optional: listen for updates
          reg.addEventListener("updatefound", () => setStatus("Update found…"));
        } catch (e) {
          console.error(e);
          setStatus("Service Worker failed ❌ (check Console)");
        }
      });
    } else {
      setStatus("Service Worker not supported on this browser.");
    }

    // ✅ Hard reload helper
    btn.addEventListener("click", () => {
      // tries to bypass cache
      location.reload(true);
    });
  </script>
</body>
</html>

========================
FILE: manifest.json
========================
{
  "name": "Masculine Security – Mini Office",
  "short_name": "MS Office",
  "description": "Mini Office App – Rechnungen, Kunden, Ausgaben, Lohnabrechnung, Einkommensteuer",
  "start_url": "./",
  "scope": "./",
  "display": "standalone",
  "background_color": "#0a1e2d",
  "theme_color": "#0a1e2d",
  "icons": [
    {
      "src": "./icon-192.png",
      "sizes": "192x192",
      "type": "image/png",
      "purpose": "any maskable"
    },
    {
      "src": "./icon-512.png",
      "sizes": "512x512",
      "type": "image/png",
      "purpose": "any maskable"
    }
  ]
}

========================
FILE: service-worker.js
========================
/* Simple cache-first SW for GitHub Pages */
const CACHE_NAME = "ms-mini-office-v1";
const ASSETS = [
  "./",
  "./index.html",
  "./manifest.json",
  "./service-worker.js",
  "./style.css",
  "./icon-192.png",
  "./icon-512.png"
];

self.addEventListener("install", (event) => {
  event.waitUntil((async () => {
    const cache = await caches.open(CACHE_NAME);
    await cache.addAll(ASSETS);
    self.skipWaiting();
  })());
});

self.addEventListener("activate", (event) => {
  event.waitUntil((async () => {
    const keys = await caches.keys();
    await Promise.all(keys.map((k) => (k === CACHE_NAME ? null : caches.delete(k))));
    await self.clients.claim();
  })());
});

self.addEventListener("fetch", (event) => {
  const req = event.request;

  // Only handle GET
  if (req.method !== "GET") return;

  event.respondWith((async () => {
    const cache = await caches.open(CACHE_NAME);
    const cached = await cache.match(req);
    if (cached) return cached;

    try {
      const fresh = await fetch(req, { cache: "no-store" });
      // Cache successful same-origin responses
      if (fresh && fresh.ok && new URL(req.url).origin === location.origin) {
        cache.put(req, fresh.clone());
      }
      return fresh;
    } catch (e) {
      // Offline fallback to cached index if navigation
      if (req.mode === "navigate") {
        const fallback = await cache.match("./index.html");
        if (fallback) return fallback;
      }
      throw e;
    }
  })());
});

========================
FILE: style.css
========================
:root{
  --bg:#0a1e2d;
  --fg:#e5e7eb;
  --card:#0f2a3d;
  --border:rgba(255,255,255,.15);
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family: Arial, sans-serif;
  background: var(--bg);
  color: var(--fg);
}

.wrap{
  padding: 28px;
  max-width: 900px;
}

h1{
  margin: 0 0 8px 0;
  font-size: 28px;
}

p{margin: 8px 0 0 0}

.card{
  margin-top: 18px;
  padding: 16px;
  border: 1px solid var(--border);
  background: var(--card);
  border-radius: 10px;
}

button{
  margin-top: 12px;
  padding: 10px 12px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,.06);
  color: var(--fg);
  border-radius: 8px;
  cursor: pointer;
}
button:hover{background: rgba(255,255,255,.10)}
